(this["webpackJsonpcustomer-rewards"]=this["webpackJsonpcustomer-rewards"]||[]).push([[0],{14:function(t,e,n){},16:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var s=n(1),c=n.n(s),a=n(3),r=n.n(a),i=(n(12),n(13),n(14),n(4)),l=n(5),o=n(7),d=n(6),j=function(){return new Promise((function(t,e){fetch("https://jmerlosrepo.github.io/customer-rewards/data/customer-rewards.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){return t.json()})).then((function(e){return t(e.customerRewards)})).catch((function(t){return e(t)}))}))},u=function(t){return t.totalPoints=0,t.forEach((function(e){var n=0,s=0,c=Math.floor(e.total);e.total>100&&(n=2*(c-100)),e.total>50&&(s=c-50),e.points=n+s,t.totalPoints=t.totalPoints+(n+s)})),t},h=n(0),m=function(t){var e=t.children;return Object(h.jsx)("table",{className:"table table-striped",children:e})},b=function(t){var e=t.headerElements;return Object(h.jsx)("thead",{className:"thead-dark",children:Object(h.jsx)("tr",{children:e.map((function(t){return Object(h.jsx)("th",{scope:"col",children:t.title},t.title)}))})})},O=function(t){var e=t.bodyData,n=t.onCustomerClick;return Object(h.jsx)("tbody",{children:e.map((function(t){return Object(h.jsxs)("tr",{className:"clickable",onClick:function(e){return n(e,t.customerId)},children:[Object(h.jsx)("td",{children:t.firstName}),Object(h.jsx)("td",{children:t.lastName}),Object(h.jsx)("td",{children:t.email})]},t.customerId)}))})},x=function(t){var e=t.bodyData,n=t.onShowDetails;return Object(h.jsx)("tbody",{children:e.map((function(t){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:t.transactionId}),Object(h.jsx)("td",{children:t.transactionDate}),Object(h.jsxs)("td",{children:["$",t.total]}),Object(h.jsx)("td",{children:t.points}),Object(h.jsx)("td",{children:Object(h.jsx)("a",{onClick:function(e){return n(e,t.transactionId)},href:"",children:"Show details"})})]},t.transactionId)}))})},f=function(t){var e=t.dataBody;return Object(h.jsx)("tbody",{children:e.map((function(t){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:t.itemId}),Object(h.jsx)("td",{children:t.description}),Object(h.jsx)("td",{children:t.quantityPurchased}),Object(h.jsxs)("td",{children:["$",t.price]})]},t.itemId)}))})},v=function(t){var e=t.selectedCustomer;return Object(h.jsxs)("div",{className:"detailsData",children:[Object(h.jsxs)("div",{className:"dataColumn",children:[Object(h.jsx)("div",{className:"label",children:"First Name:"}),Object(h.jsx)("div",{className:"data",children:e.firstName}),Object(h.jsx)("div",{className:"label",children:"Last Name:"}),Object(h.jsx)("div",{className:"data",children:e.lastName})]}),Object(h.jsxs)("div",{className:"dataColumn",children:[Object(h.jsx)("div",{className:"label",children:"Email:"}),Object(h.jsx)("div",{className:"data",children:e.email}),Object(h.jsx)("div",{className:"label",children:"Phone:"}),Object(h.jsx)("div",{className:"data",children:e.phone})]}),Object(h.jsxs)("div",{className:"dataColumn",children:[Object(h.jsx)("div",{className:"label",children:"Total Points: "}),Object(h.jsx)("div",{className:"data",children:e.totalPoints})]})]})},p=(n(16),function(t){Object(o.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(i.a)(this,n);for(var s=arguments.length,c=new Array(s),a=0;a<s;a++)c[a]=arguments[a];return(t=e.call.apply(e,[this].concat(c))).state={customers:[],transactions:[],filteredTransactions:[],transactionItems:[],selectedCustomer:{},customerHeaderElements:[{title:"First Name"},{title:"Last Name"},{title:"Email"}],transactionsHeaderElements:[{title:"Id"},{title:"Date"},{title:"Total"},{title:"Points"},{title:"Details"}],itemsHeaderElements:[{title:"Id"},{title:"Description"},{title:"Quantity"},{title:"Price"}]},t.componentDidMount=function(){j().then((function(e){return t.setState({customers:e.customers,transactions:e.transactions})})).catch((function(t){return console.log(t)}))},t.handleClickOnCustomer=function(e,n){e.preventDefault();var s=t.state.customers.find((function(t){return t.customerId===n})),c=t.state.transactions.filter((function(t){return t.customerId===n})),a=u(c);s.totalPoints=a.totalPoints,t.setState({filteredTransactions:a,selectedCustomer:s,transactionItems:[]})},t.handleShowDetails=function(e,n){e.preventDefault();var s=t.state.filteredTransactions.find((function(t){return t.transactionId===n})).items;t.setState({transactionItems:s})},t}return Object(l.a)(n,[{key:"render",value:function(){var t=this.state,e=t.customers,n=t.customerHeaderElements,s=t.filteredTransactions,c=t.itemsHeaderElements,a=t.transactionItems,r=t.transactionsHeaderElements,i=t.selectedCustomer;return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h2",{children:"Customers"}),e.length?Object(h.jsxs)(m,{children:[Object(h.jsx)(b,{headerElements:n}),Object(h.jsx)(O,{bodyData:e,onCustomerClick:this.handleClickOnCustomer})]}):Object(h.jsx)("p",{children:"No customers to be shown"}),s.length?Object(h.jsxs)("div",{className:"customerDetails",children:[Object(h.jsx)("h3",{children:"Transactions Summary"}),Object(h.jsx)(v,{selectedCustomer:i}),Object(h.jsx)("div",{className:"transactionTableSection",children:Object(h.jsxs)(m,{children:[Object(h.jsx)(b,{headerElements:r}),Object(h.jsx)(x,{bodyData:s,onShowDetails:this.handleShowDetails})]})}),0===a.length||Object(h.jsx)("div",{className:"itemsTableSection",children:Object(h.jsxs)(m,{children:[Object(h.jsx)(b,{headerElements:c}),Object(h.jsx)(f,{dataBody:a})]})})]}):Object(h.jsx)("p",{children:"Click on a customer to display its transactions."})]})}}]),n}(s.Component)),N=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(e){var n=e.getCLS,s=e.getFID,c=e.getFCP,a=e.getLCP,r=e.getTTFB;n(t),s(t),c(t),a(t),r(t)}))};r.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(p,{})}),document.getElementById("root")),N()}},[[17,1,2]]]);
//# sourceMappingURL=main.3d30afae.chunk.js.map